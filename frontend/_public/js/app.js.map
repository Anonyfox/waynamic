{"version":3,"file":"_public/js/app.js","sources":["app/app.coffee","app/scripts/controllers.coffee","app/scripts/directives.coffee","app/scripts/filters.coffee","app/scripts/services.coffee"],"names":[],"mappings":"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","sourcesContent":["'use strict'\n\n# Declare app level module which depends on filters, and services\nApp = angular.module('app', [\n  'ngCookies'\n  'ngResource'\n  'ngRoute'\n  'app.controllers'\n  'app.directives'\n  'app.filters'\n  'app.services'\n  'partials'\n])\n\nApp.config([\n  '$routeProvider'\n  '$locationProvider'\n\n($routeProvider, $locationProvider, config) ->\n\n  $routeProvider\n\n    .when('/', {templateUrl: '/partials/landingpage.html'})\n    .when('/pictures', {templateUrl: '/partials/pictures.html'})\n    # .when('/profile', {templateUrl: '/partials/profile.html'})\n    # .when('/import', {templateUrl: '/partials/import.html'})\n    # .when('/register', {templateUrl: '/partials/register.html'})\n    # .when('/login', {templateUrl: '/partials/login.html'})\n    # .when('/logout', {templateUrl: '/partials/logout.html'})\n\n    # Catch all\n    .otherwise({redirectTo: '/'})\n\n  # Without server side support html5 must be disabled.\n  $locationProvider.html5Mode(false)\n])\n","'use strict'\n\n### Controllers ###\n\nangular.module('app.controllers', [])\n\n.controller('AppCtrl', [\n  '$scope'\n  '$location'\n  '$resource'\n  '$rootScope'\n\n($scope, $location, $resource, $rootScope) ->\n  $scope.$location = $location\n  $scope.$watch('$location.path()', (path) -> $scope.activeNavId = path || '/')\n  $scope.getClass = (id) -> if $scope.activeNavId.substring(0, id.length) == id then 'active' else ''\n])\n\n.controller('PicturesCtrl', ['$scope', 'Pictures', ($scope, Pictures) ->\n  $scope.currentPictures = [{\n    tags: [\"Sonne\",\"Strand\",\"Meer\"]\n    title: \"tramonto in Grecia (Loutraki - golfo di Corinto)\"\n    url: \"http://farm8.staticflickr.com/7295/13972537026_913a8a116b.jpg\"\n  }, {\n    title: \"Lac de Capitello, een paternostermeer, Corsica Frankrijk 2002\"\n    url: \"http://farm6.staticflickr.com/5218/13981158706_c497a0feff.jpg\"\n    tags: [\"lacdecapitello\",\"paternostermeer\",\"meer\",\"lake\",\"lac\",\"corsica\",\"corse\",\"frankrijk\",\"france\",\"2002\"]\n  }, {\n     \"url\": \"http://farm3.staticflickr.com/2914/14355218095_6e23e19d27.jpg\",\n     \"title\": \"Northern values\",\n     \"tags\": [\n       \"ricohgr\",\n       \"urbanfragments\",\n       \"vsco\",\n       \"chipshop\",\n       \"cafe\"\n     ]}]\n   # }, {\n   #   \"url\": \"http://farm3.staticflickr.com/2916/14347705831_86eb0ac93e.jpg\",\n   #   \"title\": \"Livistona victoriae- Victoria River fan palm\",\n   #   \"tags\": [\n   #     \"australia\",\n   #     \"cliff\",\n   #     \"escarpment\",\n   #     \"fanpalm\",\n   #     \"gregorynationalpark\",\n   #     \"livistona\",\n   #     \"livistonavictoriae\",\n   #     \"nawulbinbinwalk\",\n   #     \"northernterritory\",\n   #     \"victoriariverfanpalm\"\n   #   ]\n   # }, {\n   #   \"url\": \"http://farm3.staticflickr.com/2930/14168351167_b3c86ba8a5.jpg\",\n   #   \"title\": \"In shadow\",\n   #   \"tags\": [\n   #     \"nikond800\",\n   #     \"nikonafsnikkor1635mm14gedvr\",\n   #     \"tree\",\n   #     \"auchinedenhill\",\n   #     \"queensview\",\n   #     \"sunset\",\n   #     \"sunlight\",\n   #     \"sunrays\",\n   #     \"shadows\",\n   #     \"scotland\",\n   #     \"warmlight\",\n   #     \"shadow\"\n   #   ]\n   # }, {\n   #   \"url\": \"http://farm4.staticflickr.com/3835/14352187354_2dd3c5bea7.jpg\",\n   #   \"title\": \"Fhotographs\",\n   #   \"tags\": [\n   #     \"juanjofotos\",\n   #     \"juanjosales\",\n   #     \"nikond300\",\n   #     \"adamski\",\n   #     \"people\",\n   #     \"explore\"\n   #   ]\n   # }, {\n   #   \"url\": \"http://farm3.staticflickr.com/2928/14167441168_b50320a593.jpg\",\n   #   \"title\": \"1965 Porsche 911 - David Amar / Pietro Vergnano\",\n   #   \"tags\": [\n   #     \"2014\",\n   #     \"24th\",\n   #     \"brandshatch\",\n   #     \"car\",\n   #     \"cars\",\n   #     \"d90\",\n   #     \"f1\",\n   #     \"festival\",\n   #     \"masters\",\n   #     \"may\",\n   #     \"michaelturnerphotography\",\n   #     \"motorracing\",\n   #     \"nikon\",\n   #     \"nikond90\",\n   #     \"racing\",\n   #     \"sport\",\n   #     \"summer\",\n   #     \"rain\",\n   #     \"track\",\n   #     \"wet\"\n   #   ]\n   # }, {\n   #   \"url\": \"http://farm4.staticflickr.com/3877/14353112655_4397810f60.jpg\",\n   #   \"title\": \"Last Checks.\",\n   #   \"tags\": [\n   #     \"paratroopers\",\n   #     \"douglasdc3\",\n   #     \"leeonsolent\",\n   #     \"unionjackdak\",\n   #     \"dakota\",\n   #     \"224064\",\n   #     \"n74589\",\n   #     \"dday\",\n   #     \"usaf\",\n   #     \"uk\",\n   #     \"england\",\n   #     \"70thanniversaryofdday\"\n   #   ]\n   # }, {\n   #   \"url\": \"http://farm4.staticflickr.com/3911/14350448824_425deac8c5.jpg\",\n   #   \"title\": \"Gunung Bromo\",\n   #   \"tags\": [\n   #     \"cemorolawang\",\n   #     \"mountbromo\",\n   #     \"gunungbromo\",\n   #     \"java\",\n   #     \"eastjava\",\n   #     \"indonesia\"\n   #   ]\n   # }]\n  # Pictures.getInitialPics (error, result) ->\n  #   console.log \"error: \", error\n  #   console.log \"result: \", result\n  #   if error then console.log error else $scope.currentPictures = result.data\n\n  $scope.requestPictures = (keywords) -> Pictures.getForKeywords keywords, (error, result) ->\n    if error\n      alert error\n    else\n      console.log result.data\n      $scope.currentPictures = result.data\n\n  $scope.nextPicturesByUrl = (sourceUrl) ->\n    pic = _.filter($scope.currentPictures, (p) -> p.url is sourceUrl)[0]\n    $scope.requestPictures( pic?.tags or [] )\n\n  $scope.nextPicturesByTag = (tag) ->\n    $scope.requestPictures( [tag] )\n])\n\n# .controller('LoginCtrl', ['$scope', 'User', ($scope, User) ->\n#   $scope.loginNewUser = ->\n#     userId = $scope.newUser.nodeId\n#     User.login (error, user) ->\n#       if error\n#         console.log \"LoginError! \", error\n#       else\n#         console.log \"Logged IN! \", user\n# ])","'use strict'\n\n### Directives ###\n\n# register the module with Angular\nangular.module('app.directives', [\n  # require the 'app.service' module\n  'app.services'\n])\n\n.directive('appVersion', [\n  'version'\n\n(version) ->\n\n  (scope, elm, attrs) ->\n    elm.text(version)\n])\n","'use strict'\n\n### Filters ###\n\nangular.module('app.filters', [])\n\n.filter('interpolate', [\n  'version',\n\n(version) ->\n  (text) ->\n    String(text).replace(/\\%VERSION\\%/mg, version)\n])\n","'use strict'\n\n### Sevices ###\n\nangular.module('app.services', [])\n\n.service(\"User\", [\"$http\", ($http) ->\n  user = {name: null, loggedIn: false}\n  return {\n    currentUser: -> user\n    login: (id, fn) ->\n      $http.post(\"/login\", {id: id}).then(\n        (data) -> fn? null, data\n        (data) -> fn? {error: (data.error or \"Node ID invalid!\")}, null\n      )\n    logout: ->\n      $http.post(\"/logout\").then(\n        (result) -> user = {name: null, loggedIn: false}\n        (result) -> user = {name: null, loggedIn: false} # force logout anyway :P\n      )\n    checkSession: ->\n      $http.get(\"/loggedin\").then(\n        (result) ->\n          user.name = result.data.name\n          user.loggedIn = true\n        (fail) ->\n      )\n  }\n])\n\n.service(\"Pictures\", [\"$http\", ($http) ->\n  getForKeywords: (ary, fn) ->\n    $http.get(\"/pictures?keywords=#{ary.join(',')}\").then(\n      (data) -> fn? null, data\n      (data) -> fn? {error: \"Something went wrong. Flickr unavailable?\"}, null\n    )\n  getInitialPics: (fn) ->\n    $http.get(\"/picturesInit\").then(\n      (data) -> fn? null, data\n      (data) -> fn? {error: \"Something went wrong. Flickr unavailable?\"}, null\n    )\n])\n"]}